var SimpleLocatorAdmin;(SimpleLocatorAdmin=SimpleLocatorAdmin||{}).Modals=function(){var e=this,t=jQuery;return e.activeBtn="",e.activeModal="",e.modalOpen=!1,e.selectors={toggleBtn:"[data-wpsl-modal-toggle]",backdrop:"[data-wpsl-modal-backdrop]",closeBtn:"[data-wpsl-modal-close]"},e.bindEvents=function(){t(document).on("click",e.selectors.toggleBtn,function(o){o.preventDefault(),e.activeBtn=t(this),e.openModal()}),t(document).on("click",e.selectors.closeBtn,function(t){t.preventDefault(),e.closeModals()}),t(document).on("open-wpsl-modal-manual",function(o,a){e.activeModal=t('*[data-wpsl-modal="'+a+'"]'),console.log(e.activeModal),e.openModal()}),t(document).on("close-wpsl-modal-manual",function(t){e.closeModals()}),t(document).on("click",e.selectors.backdrop,function(t){e.closeModals()})},e.openModal=function(){if(e.modalOpen)e.closeModals();else{if(t(e.activeBtn).length>0){var o=t(e.activeBtn).attr("data-wpsl-modal-toggle");e.activeModal=t('*[data-wpsl-modal="'+o+'"]')}t(e.activeModal).addClass("active"),e.modalOpen=!0,t(document).trigger("open-wpsl-modal",[e.activeBtn,e.activeModal])}},e.closeModals=function(){e.modalOpen=!1,t("[data-wpsl-modal]").removeClass("active"),t(document).trigger("close-wpsl-modal",[e.activeBtn,e.activeModal])},e.bindEvents()},(SimpleLocatorAdmin=SimpleLocatorAdmin||{}).GeneralSettings=function(){var e=this,t=jQuery;return e.selectors={geoEnableCheckbox:"data-simple-locator-geo-enabled-checkbox",locationButtonText:"data-simple-locator-location-button-text",uploadMapPinButton:"data-simple-locator-upload-pin-button",removeMapPinButton:"data-simple-locator-remove-pin-button",mapPinImage:"data-simple-locator-map-pin-image",mapPinInput:"data-simple-locator-map-pin-input",mapPinContainer:"data-simple-locator-map-pin-image-container",userMapPin:"data-simple-locator-user-map-pin",userPinCheckbox:"data-simple-locator-toggle-user-pin"},e.bindEvents=function(){t(document).ready(function(){e.toggleLocationButtonText(),e.toggleUserPin()}),t(document).on("change","["+e.selectors.geoEnableCheckbox+"]",function(){e.toggleLocationButtonText()}),t(document).on("click","["+e.selectors.uploadMapPinButton+"]",function(o){o.preventDefault(),e.openMediaLibrary(t(this))}),t(document).on("click","["+e.selectors.removeMapPinButton+"]",function(o){o.preventDefault(),e.removeMapPin(t(this))}),t(document).on("change","["+e.selectors.userPinCheckbox+"]",function(){e.toggleUserPin()})},e.toggleLocationButtonText=function(){var o=t("["+e.selectors.locationButtonText+"]");if(t("["+e.selectors.geoEnableCheckbox+"]").is(":checked"))return"https:"!==location.protocol&&t("[data-simple-locator-no-https]").show(),void t(o).show();t("[data-simple-locator-no-https]").hide(),t(o).hide()},e.removeMapPin=function(o){var a=t(o).parent(".field"),l=t(a).find("["+e.selectors.mapPinInput+"]");t(a).find("["+e.selectors.mapPinContainer+"]").html(""),t(a).find("["+e.selectors.mapPinInput+"]").val("");var s='<input id="upload_image_button" type="button" value="'+wpsl_locator.upload+'" class="button action" '+e.selectors.uploadMapPinButton+" />";t(s).insertBefore(l),t(a).find("["+e.selectors.removeMapPinButton+"]").remove()},e.addMapPin=function(o,a){var l=t(a).parent(".field"),s='<img src="'+o+'" id="map-pin-image" '+e.selectors.mapPinImage+" />",n='<input type="button" value="'+wpsl_locator.remove+'" class="button action" style="margin-right:5px;margin-left:10px;" '+e.selectors.removeMapPinButton+" />";t(l).find("["+e.selectors.mapPinContainer+"]").html(s);var i=t(l).find("["+e.selectors.mapPinInput+"]");t(n).insertBefore(i),t(l).find("["+e.selectors.uploadMapPinButton+"]").remove(),t(l).find("["+e.selectors.mapPinInput+"]").val(o)},e.openMediaLibrary=function(t){mediaUploader=wp.media.frames.file_frame=wp.media({title:"Choose Map Pin",button:{text:"Choose Map Pin"},multiple:!1}),mediaUploader.on("select",function(){var o=mediaUploader.state().get("selection").first().toJSON();e.addMapPin(o.url,t)}),mediaUploader.open()},e.toggleUserPin=function(){t("["+e.selectors.userPinCheckbox+"]").is(":checked")?t("["+e.selectors.userMapPin+"]").show():t("["+e.selectors.userMapPin+"]").hide()},e.bindEvents()},(SimpleLocatorAdmin=SimpleLocatorAdmin||{}).PostType=function(){var e=this,t=jQuery;return e.selectors={postTypeField:"data-simple-locator-post-type-field",postTypeLabels:"data-simple-locator-post-type-labels",latitudeSelectField:"data-simple-locator-latitude-select",longitudeSelectField:"data-simple-locator-longitude-select",latitudeField:"data-simple-locator-latitude-field",longitudeField:"data-simple-locator-longitude-field",useLocatorFieldsRadio:"data-simple-locator-use-included-fields",useCustomFieldsRadio:"data-simple-locator-use-custom-fields",latLngOptions:"data-simple-locator-lat-lng-options",showHiddenCheckbox:"data-simple-locator-show-hidden",hidePostTypeCheckbox:"data-simple-locator-hide-post-type",hideIncludedFieldsCheckbox:"data-simple-locator-hide-included-fields",resetButton:"data-simple-locator-reset-post-type",resetButtonCheckbox:"data-simple-locator-resest-post-type-checkbox",acfMapField:"data-simple-locator-acf-map-field"},e.bindEvents=function(){t(document).ready(function(){e.togglePostTypeLabels(),e.toggleCustomFieldOptions(),e.toggleHideDefaultCheckbox(),e.toggleHideIncludedFieldsCheckbox(),e.loadPostTypeFields(),e.toggleAcfMapField()}),t(document).on("change","["+e.selectors.postTypeField+"]",function(){e.togglePostTypeLabels(),e.loadPostTypeFields(),e.toggleHideDefaultCheckbox(),e.toggleHideIncludedFieldsCheckbox()}),t(document).on("change","["+e.selectors.latitudeSelectField+"],["+e.selectors.longitudeSelectField+"]",function(){e.updateLatLngValues()}),t(document).on("change","["+e.selectors.useLocatorFieldsRadio+"],["+e.selectors.useCustomFieldsRadio+"]",function(){t("["+e.selectors.useLocatorFieldsRadio+"]").is(":checked")&&e.selectLocationFields(),e.toggleAcfMapField(),e.toggleCustomFieldOptions(),e.toggleHideIncludedFieldsCheckbox()}),t(document).on("change","["+e.selectors.showHiddenCheckbox+"]",function(){e.loadPostTypeFields()}),t(document).on("click","["+e.selectors.resetButton+"]",function(t){if(t.preventDefault(),!confirm("Are you sure you want to reset to the default post type?"))return!1;e.resetPostType()}),t(document).on("change","["+e.selectors.resetButtonCheckbox+"]",function(){var o=t("["+e.selectors.resetButton+"]");t(this).is(":checked")?t(o).show():t(o).hide()})},e.togglePostTypeLabels=function(){var o=t("["+e.selectors.postTypeLabels+"]");t("["+e.selectors.postTypeField+"]").val()!==wpsl_locator.posttype?t(o).hide():t(o).show()},e.loadPostTypeFields=function(){var o=t("["+e.selectors.postTypeField+"]").val();t("["+e.selectors.useLocatorFieldsRadio+"]").is(":checked")?e.selectLocationFields():(t("["+e.selectors.latitudeSelectField+"],["+e.selectors.longitudeSelectField+"]").empty(),e.getCustomFields(o))},e.selectLocationFields=function(){t("["+e.selectors.useLocatorFieldsRadio+"]").attr("checked","checked"),t("["+e.selectors.useCustomFieldsRadio+"]").removeAttr("checked"),t("["+e.selectors.latitudeField+"]").val("wpsl_latitude"),t("["+e.selectors.longitudeField+"]").val("wpsl_longitude"),t("["+e.selectors.latitudeSelectField+"]").val("wpsl_latitude"),t("["+e.selectors.longitudeSelectField+"]").val("wpsl_longitude")},e.getCustomFields=function(o){var a=t("["+e.selectors.showHidden+"]").is(":checked")?"true":"false",l=t("["+e.selectors.useLocatorFieldsRadio+"]").is(":checked")?"true":"false";t.ajax({type:"GET",url:ajaxurl,data:{action:"wpslposttype",nonce:wpsl_locator.locatorNonce,post_type:o,show_hidden:a,include_wpsl:l},success:function(a){t("["+e.selectors.latitudeSelectField+"],["+e.selectors.longitudeSelectField+"]").html(a.fields),e.updateLatLngValues(),"location"===o&&e.selectLocationFields()}})},e.toggleCustomFieldOptions=function(){var o=t("["+e.selectors.latLngOptions+"]");t("["+e.selectors.useCustomFieldsRadio+"]").is(":checked")?t(o).show():t(o).hide()},e.updateLatLngValues=function(){var o=t("["+e.selectors.latitudeSelectField+"]").val(),a=t("["+e.selectors.longitudeSelectField+"]").val();t("["+e.selectors.latitudeField+"]").val(o),t("["+e.selectors.longitudeField+"]").val(a)},e.toggleHideDefaultCheckbox=function(){var o=t("["+e.selectors.postTypeField+"]").val(),a=t("["+e.selectors.hidePostTypeCheckbox+"]"),l=t(a).parents(".row");if(o===wpsl_locator.posttype)return t(a).removeAttr("checked"),void t(l).hide();t(l).show()},e.toggleHideIncludedFieldsCheckbox=function(){var o=t("["+e.selectors.hideIncludedFieldsCheckbox+"]"),a=t(o).parent("label").parent("p");if(!!t("["+e.selectors.useLocatorFieldsRadio+"]").is(":checked"))return t(o).removeAttr("checked"),void t(a).hide();t(a).show()},e.resetPostType=function(){t.ajax({type:"POST",url:ajaxurl,data:{action:"wpslresetposttype"},success:function(e){location.reload()}})},e.toggleAcfMapField=function(){t("["+e.selectors.useLocatorFieldsRadio+"]").is(":checked")?t("["+e.selectors.acfMapField+"]").hide():t("["+e.selectors.acfMapField+"]").show()},e.bindEvents()},(SimpleLocatorAdmin=SimpleLocatorAdmin||{}).PostEdit=function(){var e=this,t=jQuery;return e.lookupaddress=!0,e.mappinrelocated=!1,e.selectors={inputAddress:"#wpsl_address",inputCity:"#wpsl_city",inputState:"#wpsl_state",inputZip:"#wpsl_zip",inputLatitude:"#wpsl_latitude",inputLongitude:"#wpsl_longitude",noAddressConfirm:"data-simple-locator-confirm-no-address",publishButton:"#publish"},e.bindEvents=function(){t(window).on("load",function(){e.setMapPinStatus(),e.checkMapStatus(),e.groupIntoAcfTab(),"true"===t("#wpsl_custom_geo").val()&&(mappinrelocated=!0)}),t(document).on("click",".acf-tab-button",function(){e.checkMapStatus()}),t(document).on("click",e.selectors.publishButton,function(o){if(("wpsl_latitude"===wpsl_locator.lat_field||""===wpsl_locator.map_field)&&e.lookupaddress&&!e.mappinrelocated)if(o.preventDefault(),editScreenGoogleApiError)t(document).trigger("open-wpsl-modal-manual",["post-edit-error"]);else{var a=e.formatAddress();e.googleGeocodeAddress(a)}}),t(document).on("click","["+e.selectors.noAddressConfirm+"]",function(t){t.preventDefault(),e.saveWithoutLocation()})},e.groupIntoAcfTab=function(){if(wpsl_locator.acf_tab&&""!==wpsl_locator.acf_tab){var e=".acf-"+(a=wpsl_locator.acf_tab.replace("_","-"));if(t(e).length<1)return void t("#wpsl-meta-box").show();var o=t(".wpsl-meta").detach().addClass("acf-field acf-field-text").insertAfter(e).first(),a=t(".acf-tab-button[data-key="+wpsl_locator.acf_tab+"]").parent("li");t(a).hasClass("active")||t(o).addClass("acf-hidden")}else;},e.setMapPinStatus=function(){e.mappinrelocated="true"==t("#wpsl_custom_geo").val()},e.formatAddress=function(){return t(e.selectors.inputAddress).val()+" "+t(e.selectors.inputCity).val()+" "+t(e.selectors.inputState).val()+" "+t(e.selectors.inputZip).val()},e.googleGeocodeAddress=function(o){geocoder=new google.maps.Geocoder,geocoder.geocode({address:o},function(o,a){if(a==google.maps.GeocoderStatus.OK){var l=o[0].geometry.location.lat(),s=o[0].geometry.location.lng();t(e.selectors.inputLatitude).val(l),t(e.selectors.inputLongitude).val(s),e.lookupaddress=!1,t(e.selectors.publishButton).click()}else t(document).trigger("open-wpsl-modal-manual",["post-edit-error"])})},e.saveWithoutLocation=function(){t(document).trigger("close-wpsl-modal-manual"),e.lookupaddress=!1,t(e.selectors.publishButton).click()},e.checkMapStatus=function(){if(t("#wpslmap").length>0){var o=t(e.selectors.inputLatitude).val(),a=t(e.selectors.inputLongitude).val();""!==o&&""!==a&&(t("#wpslmap").show(),e.loadGoogleMap(o,a))}},e.loadGoogleMap=function(o,a){var l,s=new google.maps.Map(document.getElementById("wpslmap"),{zoom:14,center:new google.maps.LatLng(o,a),mapTypeId:google.maps.MapTypeId.ROADMAP,mapTypeControl:!1,scaleControl:!1});l=new google.maps.Marker({position:new google.maps.LatLng(o,a),map:s,draggable:!0}),google.maps.event.addListener(l,"drag",function(){t(e.selectors.inputLatitude).val(l.position.lat()),t(e.selectors.inputLongitude).val(l.position.lng()),t(e.selectors.inputLatitude+","+e.selectors.inputLongitude).attr("readonly",!1),t("#wpsl_custom_geo").val("true"),e.mappinrelocated=!0})},e.bindEvents()},(SimpleLocatorAdmin=SimpleLocatorAdmin||{}).DefaultMap=function(){var e=this,t=jQuery;return e.selectors={showDefaultCheckbox:"data-simple-locator-default-checkbox",defaultMap:"data-simple-locator-default-map",defaultMapContainer:"data-simple-locator-default-map-container",zoomInput:"data-simple-locator-default-map-zoom",latitudeInput:"data-simple-locator-default-map-latitude",longitudeInput:"data-simple-locator-default-map-longitude",locationSearchButton:"data-simple-locator-location-search-button",locationSearchInput:"data-simple-locator-location-search-input",error:"data-simple-locator-error",centerUserPositionCheckbox:"data-simple-locator-user-position-default"},e.bindEvents=function(){t(document).ready(function(){t("["+e.selectors.defaultMap+"]").length<1||(e.toggleDefaultMap(),e.toggleHttpsWarning())}),t(document).on("change","["+e.selectors.showDefaultCheckbox+"]",function(){e.toggleDefaultMap()}),t(document).on("click","["+e.selectors.locationSearchButton+"]",function(t){t.preventDefault(),e.findLocation()}),t(document).on("change","["+e.selectors.centerUserPositionCheckbox+"]",function(){e.toggleHttpsWarning()})},e.toggleDefaultMap=function(){var o=t("["+e.selectors.showDefaultCheckbox+"]").is(":checked"),a=t("["+e.selectors.defaultMapContainer+"]");if(o)return t(a).show(),void e.loadDefaultMap();t(a).hide()},e.loadDefaultMap=function(o,a){a=void 0!==(o=void 0!==o&&""!==o&&o)&&""!==a&&a,o||(o=wpsl_locator_defaultmap.latitude),a||(a=wpsl_locator_defaultmap.longitude);var l=new google.maps.LatLng(o,a),s={center:l,zoom:parseInt(wpsl_locator_defaultmap.zoom),mapTypeControl:!1,streetViewControl:!1,styles:wpsl_locator_defaultmap.styles},n=new google.maps.Map(document.getElementById("wpsl-default"),s),i=new google.maps.Marker({position:l,map:n,icon:wpsl_locator_defaultmap.mappin,draggable:!0});o&&a&&(t("["+e.selectors.latitudeInput+"]").val(o),t("["+e.selectors.longitudeInput+"]").val(a)),google.maps.event.addListener(n,"zoom_changed",function(){var o=n.getZoom();t("["+e.selectors.zoomInput+"]").val(o)}),google.maps.event.addListener(i,"drag",function(){t("["+e.selectors.latitudeInput+"]").val(i.position.lat()),t("["+e.selectors.longitudeInput+"]").val(i.position.lng())})},e.findLocation=function(){e.toggleError(!1);var o=t("["+e.selectors.locationSearchInput+"]").val();geocoder=new google.maps.Geocoder,geocoder.geocode({address:o},function(t,o){if(o!=google.maps.GeocoderStatus.OK)e.toggleError(!0);else{var a=t[0].geometry.location.lat(),l=t[0].geometry.location.lng();e.loadDefaultMap(a,l)}})},e.loadSearchResults=function(t,o){e.loadDefaultMap(t,o)},e.toggleError=function(o){o?t("["+e.selectors.error+"]").show():t("["+e.selectors.error+"]").hide()},e.toggleHttpsWarning=function(){t("["+e.selectors.centerUserPositionCheckbox+"]").is(":checked")?"https:"!==location.protocol&&t("[data-simple-locator-no-https]").show():t("[data-simple-locator-no-https]").hide()},e.bindEvents()},(SimpleLocatorAdmin=SimpleLocatorAdmin||{}).ResultsDisplay=function(){var e=this,t=jQuery;return e.bindEvents=function(){t(document).ready(function(){e.enableDatePicker()}),t(document).on("click",".wpsl-field-add",function(t){t.preventDefault(),e.addResultField()}),t(document).on("click",".wpsl-post-field-add",function(t){t.preventDefault(),e.addPostField()})},e.addResultField=function(){var e="["+t("#wpsl-fields").val()+"]";tinymce.activeEditor.execCommand("mceInsertContent",!1,e)},e.addPostField=function(){var e="["+t("#wpsl-post-fields").val()+"]";tinymce.activeEditor.execCommand("mceInsertContent",!1,e)},e.enableDatePicker=function(){t("[data-date-picker]").datepicker({beforeShow:function(e,o){t("#ui-datepicker-div").addClass("wpsl-datepicker")}})},e.bindEvents()},(SimpleLocatorAdmin=SimpleLocatorAdmin||{}).MapDisplay=function(){var e=this,t=jQuery;return e.selectors={styleChoiceSelect:"data-simple-locator-map-style-choice",styleChoice:"data-simple-locator-map-style",styleList:"data-simple-locator-map-style-list",styleSelect:"data-simple-locator-map-style-select",styleChoiceInput:"data-simple-locator-map-style-choice-input",customOptionsCheckbox:"data-simple-locator-custom-map-options-checkbox",customOptions:"data-simple-locator-custom-map-options",customAutocompleteCheckbox:"data-simple-locator-custom-autocomplete-option",customAutocomplete:"data-simple-locator-custom-autocomplete"},e.bindEvents=function(){t(document).ready(function(){t("["+e.selectors.styleList+"]").length<1||e.buildMapChoices()}),t(document).on("change","["+e.selectors.styleChoiceSelect+"]",function(){var o=t(this).val();e.toggleChoice(o)}),t(document).on("click","["+e.selectors.styleSelect+"]",function(o){o.preventDefault(),e.selectStyle(t(this))}),t(document).on("change","["+e.selectors.customOptionsCheckbox+"]",function(){t(this).is(":checked")?t("["+e.selectors.customOptions+"]").show():t("["+e.selectors.customOptions+"]").hide()}),t(document).on("change","["+e.selectors.customAutocompleteCheckbox+"]",function(){e.toggleAutocompleteOptions()})},e.toggleChoice=function(o){o=t("["+e.selectors.styleChoice+"="+o+"]");t("["+e.selectors.styleChoice+"]").hide(),t(o).show()},e.buildMapChoices=function(){t("["+e.selectors.styleList+"]").empty(),t.each(wpsl_locator_mapstyles,function(t,o){e.buildMapHtml(t,o),e.loadChoiceMap(o)})},e.buildMapHtml=function(o,a){var l='<li class="';o%3==0&&(l+="first"),a.selected&&(l+=" active"),l+='">',l+="<h4>"+a.title+"</h4>",l+='<div class="map" id="map_'+a.id+'"></div>',l+='<a href="'+a.id+'" class="choose-style" '+e.selectors.styleSelect+">",l+="Use Style",l+="</a>",l+="</li>",t("["+e.selectors.styleList+"]").append(l)},e.loadChoiceMap=function(e){var t=JSON.parse(e.styles),o="map_"+e.id,a={center:new google.maps.LatLng(40.7699354,-73.9810812),zoom:13,mapTypeControl:!1,streetViewControl:!1,styles:t};e=new google.maps.Map(document.getElementById(o),a)},e.selectStyle=function(o){var a=t(o).attr("href");t("["+e.selectors.styleChoiceInput+"]").val(a),t("["+e.selectors.styleList+"] li").removeClass("active"),t(o).parent("li").addClass("active")},e.toggleAutocompleteOptions=function(){t("["+e.selectors.customAutocompleteCheckbox+"]").is(":checked")?t("["+e.selectors.customAutocomplete+"]").show():t("["+e.selectors.customAutocomplete+"]").hide()},e.bindEvents()},(SimpleLocatorAdmin=SimpleLocatorAdmin||{}).SearchHistory=function(){var e=this,t=jQuery;return e.locations,e.selectors={container:"data-simple-locator-search-history-map",perPage:"data-simple-locator-history-per-page"},e.bindEvents=function(){t(document).ready(function(){t("["+e.selectors.container+"]").length<1||(e.locations=search_history_locations,e.loadMap())}),t("["+e.selectors.perPage+"]").on("change",function(){t(this).parents("form").submit()})},e.loadMap=function(){var o,a=wpsl_locator_searchhistory.mapstyles,l=wpsl_locator_searchhistory.mappin?wpsl_locator_searchhistory.mappin:"",s=new google.maps.LatLngBounds,n=e.locations,i=t("["+e.selectors.container+"]"),r={mapTypeId:"roadmap",mapTypeControl:!1,zoom:8,styles:a,scrollwheel:!1,panControl:!1},c=new google.maps.InfoWindow,d=new google.maps.Map(i[0],r);for(o=0;o<n.length;o++){var p=new google.maps.LatLng(n[o].latitude,n[o].longitude);s.extend(p);var u=new google.maps.Marker({position:p,map:d,title:n[o].search_term,icon:l});n[o].infowindow="<h4>"+n[o].date+"</h4>",n[o].infowindow+="<p>",n[o].infowindow+=wpsl_locator_searchhistory.searchTerm+": "+n[o].search_term,n[o].infowindow+="<br>"+wpsl_locator_searchhistory.searchTermFormatted+": "+n[o].search_term_formatted,n[o].infowindow+="<br>"+wpsl_locator_searchhistory.userIp+": "+n[o].user_ip,n[o].infowindow+="<br>"+wpsl_locator_searchhistory.distance+": "+n[o].distance,n[o].infowindow+="</p>",google.maps.event.addListener(u,"click",function(e,t){return function(){c.setContent(n[t].infowindow),c.open(d,e)}}(u,o)),d.fitBounds(s);var m=google.maps.event.addListener(d,"idle",function(){n.length<2&&d.setZoom(13),google.maps.event.removeListener(m)})}var f=google.maps.event.addListener(d,"bounds_changed",function(e){google.maps.event.removeListener(f)})},e.bindEvents()},(SimpleLocatorAdmin=SimpleLocatorAdmin||{}).ImportUpload=function(){var e=this,t=jQuery;return e.selectors={startNewBtn:"data-simple-locator-import-start-new",uploadForm:"data-simple-locator-import-upload-form",previousImportMessage:"data-simple-locator-import-previous-message",postTypeInput:"data-simple-locator-import-post-type-input",toggleHiddenPostTypeCheckbox:"data-simple-locator-show-non-public-types",nonPublicPostType:"data-non-public-post-type",toggleImportDetails:"data-import-toggle-details",undoImportButton:"data-simple-locator-import-undo-button",redoImportButton:"data-simple-locator-import-redo-button",removeImportButton:"data-simple-locator-import-remove-button"},e.bindEvents=function(){t(document).ready(function(){e.togglePublicPostTypes()}),t(document).on("change","["+e.selectors.toggleHiddenPostTypeCheckbox+"]",function(){e.togglePublicPostTypes()}),t(document).on("click","["+e.selectors.startNewBtn+"]",function(t){t.preventDefault(),e.startNewImport()}),t(document).on("click","["+e.selectors.toggleImportDetails+"]",function(o){o.preventDefault(),e.toggleImportDetails(t(this))}),t(document).on("click","["+e.selectors.undoImportButton+"]",function(o){o.preventDefault();var a=t(this).attr(e.selectors.undoImportButton);e.undoImport(a)}),t(document).on("click","["+e.selectors.redoImportButton+"]",function(o){o.preventDefault();var a=t(this).attr(e.selectors.redoImportButton);e.redoImport(a)}),t(document).on("click","["+e.selectors.removeImportButton+"]",function(o){o.preventDefault();var a=t(this).attr(e.selectors.removeImportButton);e.removeImport(a)})},e.startNewImport=function(){t("["+e.selectors.uploadForm+"]").show(),t("["+e.selectors.previousImportMessage+"]").hide()},e.togglePublicPostTypes=function(){var o=t("["+e.selectors.nonPublicPostType+"]");t("["+e.selectors.toggleHiddenPostTypeCheckbox+"]").is(":checked")?t(o).show():t(o).hide()},e.toggleImportDetails=function(e){t(e).parents(".import").find(".import-body").toggle()},e.undoImport=function(e){confirm(wpsl_locator.confirm_undo)&&(t("#undo_import_id").val(e),t("[data-undo-import-form]").submit())},e.redoImport=function(e){confirm(wpsl_locator.confirm_redo)&&(t("#redo_import_id").val(e),t("[data-redo-import-form]").submit())},e.removeImport=function(e){confirm(wpsl_locator.confirm_remove)&&(t("#remove_import_id").val(e),t("[data-remove-import-form]").submit())},e.bindEvents()},(SimpleLocatorAdmin=SimpleLocatorAdmin||{}).ImportColumnMap=function(){var e=this,t=jQuery;return e.totalrows=0,e.rowcount=0,e.selectors={loadingIndicator:"data-simple-locator-import-loading",columnSelection:"data-simple-locator-import-column-selection",rowSelectionButton:"data-simple-locator-import-row-selection-button",rowSelectionButtonNext:'[data-simple-locator-import-row-selection-button="next"]',rowSelectionButtonBack:'[data-simple-locator-import-row-selection-button="back"]',currentRowText:"data-simple-locator-import-current-row",postType:"data-simple-locator-import-post-type",selectColumn:"data-simple-locator-import-column-select",selectField:"data-simple-locator-import-field-select",selectType:"data-simple-locator-import-type-select",addFieldButton:"data-simple-locator-import-add-field",removeFieldButton:"data-simple-locator-import-remove-field",saveButton:"data-simple-locator-import-save",formError:"data-simple-locator-form-error",columnError:"data-simple-locator-column-error",fieldRow:"data-simple-locator-import-field",form:"data-simple-locator-import-column-form",status:"data-import-post-status",taxonomySeparator:"data-import-taxonomy-separator"},e.bindEvents=function(){t(document).ready(function(){"true"===wpsl_locator.isimport&&"2"===wpsl_locator.importstep&&(e.getColumns(),e.getPostTypeFields())}),t("["+e.selectors.rowSelectionButton+"]").on("click",function(o){o.preventDefault(),e.moveRowSelection(t(this))}),t(document).on("change","["+e.selectors.selectField+"]",function(){e.autoSelectFieldType(t(this)),e.toggleStatusSelection(),e.toggleTaxonomySelector()}),t(document).on("click","["+e.selectors.addFieldButton+"]",function(t){t.preventDefault(),e.addField()}),t(document).on("click","["+e.selectors.removeFieldButton+"]",function(o){o.preventDefault(),e.removeField(t(this))}),t(document).on("click","["+e.selectors.saveButton+"]",function(o){o.preventDefault(),t("["+e.selectors.formError+"],["+e.selectors.columnError+"]").hide(),e.validates()&&t("["+e.selectors.form+"]").submit()})},e.getColumns=function(){e.toggleLoading(!0),t.ajax({url:ajaxurl,type:"POST",datatype:"json",data:{action:"wpslimportcolumns",rowcount:e.rowcount,nonce:wpsl_locator.locatorNonce},success:function(t){e.totalrows=t.row_count,e.updateCurrentRowText(),e.populateColumnSelects(t)}})},e.populateColumnSelects=function(o){var a=e.rowcount+1===o.row_count&&"disabled";t(e.selectors.rowSelectionButtonNext).attr("disabled",a);for(var l='<option value="">'+wpsl_locator.choose_column+"</option>",s=0;s<o.columns.length;s++)l+='<option value="'+s+'">'+o.columns[s]+"</option>";t("["+e.selectors.selectColumn+"]").html(l),e.toggleLoading(!1)},e.moveRowSelection=function(o){e.rowcount="next"===t(o).attr(e.selectors.rowSelectionButton)?e.rowcount+1:e.rowcount-1;var a=0==e.rowcount&&"disabled";t(e.selectors.rowSelectionButtonBack).attr("disabled",a),e.getColumns()},e.updateCurrentRowText=function(){var o=wpsl_locator.Row+" "+(e.rowcount+1)+" of "+e.totalrows;t("["+e.selectors.currentRowText+"]").text(o)},e.getPostTypeFields=function(){t.ajax({type:"GET",url:ajaxurl,data:{action:"wpslposttype",nonce:wpsl_locator.locatorNonce,post_type:t("["+e.selectors.postType+"]").val(),show_hidden:"false",include_wpsl:"true"},success:function(t){e.populateWordPressFieldSelects(t)}})},e.populateWordPressFieldSelects=function(o){var a=t("["+e.selectors.selectField+"]"),l='<optgroup label="'+wpsl_locator.wordpress_fields+'">';l+='<option value="title">'+wpsl_locator.title+"</option>",l+='<option value="content">'+wpsl_locator.content+"</option>",l+='<option value="excerpt">'+wpsl_locator.excerpt+"</option>",l+='<option value="publish_date">'+wpsl_locator.publish_date+"</option>",l+='<option value="publish_date_gmt">'+wpsl_locator.publish_date_gmt+"</option>",l+='<option value="modified_date">'+wpsl_locator.modified_date+"</option>",l+='<option value="modified_date_gmt">'+wpsl_locator.modified_date_gmt+"</option>",l+='<option value="slug">'+wpsl_locator.slug+"</option>",l+='<option value="status">'+wpsl_locator.status+"</option>",l+="</optgroup>";var s='<optgroup label="'+wpsl_locator.custom_fields+'">';s+=o.fields,s+="</optgroup";var n=o.taxonomies;taxonomy_fields=null,void 0!==n&&""!==n&&(taxonomy_fields='<optgroup label="'+wpsl_locator.taxonomies+'">',t.each(n,function(){taxonomy_fields+='<option value="taxonomy_'+this.name+'">'+this.label+"</option>"}),taxonomy_fields+="<optgroup>"),t.each(a,function(e,o){t(this).append(l),t(this).append(s),taxonomy_fields&&t(this).append(taxonomy_fields)})},e.autoSelectFieldType=function(o){var a=t(o).val(),l=t(o).next("["+e.selectors.selectType+"]");"wpsl_address"===a&&t(l).val("address"),"wpsl_city"===a&&t(l).val("city"),"wpsl_state"===a&&t(l).val("state"),"wpsl_zip"===a&&t(l).val("zip"),"wpsl_website"===a&&t(l).val("website")},e.addField=function(){var o=t(".wpsl-field").length,a=t(".row-template").clone().removeClass("row-template");t(a).appendTo(".wpsl-column-fields").find("["+e.selectors.removeFieldButton+"]").show(),t(a).find(".wpsl-column-error").text("").hide(),t(a).find("["+e.selectors.selectField+"]").attr("name","wpsl_import_field["+o+"][field]"),t(a).find("["+e.selectors.selectColumn+"]").attr("name","wpsl_import_field["+o+"][csv_column]"),t(a).find("["+e.selectors.selectType+"]").attr("name","wpsl_import_field["+o+"][type]")},e.removeField=function(e){var o=t(e).parent("li");t(o).remove()},e.validates=function(){var o=!1,a=!1,l=!0;return t.each(t("["+e.selectors.fieldRow+"]"),function(s,n){var i=t(this).find("["+e.selectors.selectColumn+"]"),r=t(this).find("["+e.selectors.selectField+"]");""!==t(i).val()&&""!==t(r).val()||(t(this).find("["+e.selectors.columnError+"]").text(wpsl_locator.required).show(),l=!1);var c=t(this).find("["+e.selectors.selectType+"]");"address"!==t(c).val()&&"full_address"!==t(c).val()||(a=!0),"title"===t(r).val()&&(o=!0)}),a||(t("["+e.selectors.formError+"]").html("<p>"+wpsl_locator.required_address+"</p>").show(),l=!1),o||(t("["+e.selectors.formError+"]").html("<p>"+wpsl_locator.required_title+"</p>").show(),l=!1),l},e.toggleStatusSelection=function(){var o=!1,a=t("["+e.selectors.selectField+"]");t.each(a,function(){"status"===t(this).val()&&(o=!0)}),o?t("["+e.selectors.status+"]").hide():t("["+e.selectors.status+"]").show()},e.toggleTaxonomySelector=function(){var o=!1,a=t("["+e.selectors.selectField+"]");t.each(a,function(){t(this).val().includes("taxonomy_")&&(o=!0)}),o?t("["+e.selectors.taxonomySeparator+"]").show():t("["+e.selectors.taxonomySeparator+"]").hide()},e.toggleLoading=function(o){var a=t("["+e.selectors.loadingIndicator+"]"),l=t("["+e.selectors.columnSelection+"]");if(o)return t(a).show(),void t(l).hide();t(a).hide(),t(l).show()},e.bindEvents()},(SimpleLocatorAdmin=SimpleLocatorAdmin||{}).Import=function(){var e=this,t=jQuery;return e.pause=!1,e.offset=parseInt(wpsl_locator.importoffset),e.completecount=parseInt(wpsl_locator.complete_count),e.errorcount=parseInt(wpsl_locator.error_count),e.imports_per_request=5,e.selectors={startButton:"data-simple-locator-import-start-button",pauseButton:"data-simple-locator-import-pause",intro:"data-simple-locator-import-intro",lastImported:"data-simple-locator-import-last-imported",progressMessage:"data-simple-locator-import-progress-message",progressBar:"data-simple-locator-import-progress-bar",progressBarBackground:"data-simple-locator-import-progress-bar-background",error:"data-simple-locator-import-error",errorCount:"data-simple-locator-import-error-count",progressCount:"data-simple-locator-import-progress-count",importComplete:"data-simple-locator-import-complete",totalCount:"data-simple-locator-import-total-count"},e.bindEvents=function(){t(document).on("click","["+e.selectors.startButton+"]",function(t){t.preventDefault(),e.startImport()}),t(document).on("click","["+e.selectors.pauseButton+"]",function(o){o.preventDefault(),e.pause=!e.pause;var a=e.pause?wpsl_locator.pause_continue:wpsl_locator.pause;t(this).text(a),e.doImport()})},e.startImport=function(){t("["+e.selectors.intro+"],["+e.selectors.lastImported+"]").hide(),t("["+e.selectors.progressMessage+"]").show(),e.doImport()},e.doImport=function(){e.pause||t.ajax({url:ajaxurl,type:"post",datatype:"json",data:{action:"wpsldoimport",nonce:wpsl_locator.locatorNonce,offset:e.offset,imports_per_request:e.imports_per_request},success:function(o){if("complete"!==o.status)return"error"===o.status?(t("["+e.selectors.error+"]").html("<p>"+o.message+"</p>").show(),void t("["+e.selectors.progressMessage+"]").hide()):void e.updateProgress(o);e.completeImport()}})},e.updateProgress=function(o){e.completecount=e.completecount+o.import_count,e.offset=e.offset+o.import_count+o.failed_count,e.errorcount=e.errorcount+o.failed_count,t("["+e.selectors.progressCount+"]").text(e.completecount),t("["+e.selectors.errorCount+"]").text(e.errorcount);var a=t("["+e.selectors.progressBarBackground+"]").width()*(e.completecount/parseInt(t("["+e.selectors.progressBarBackground+"]").data("total")));t("["+e.selectors.progressBar+"]").width(a+"px"),e.doImport()},e.completeImport=function(){t("["+e.selectors.progressMessage+"]").hide(),t("["+e.selectors.importComplete+"]").show(),t.ajax({url:ajaxurl,type:"post",datatype:"json",data:{action:"wpslfinishimport"},success:function(o){t("["+e.selectors.totalCount+"]").text(o.import_count),t("["+e.selectors.errorCount+"]").text(o.error_count),o.errors.length>0&&e.appendErrorRows(o.errors)}})},e.appendErrorRows=function(e){for(var o=0;o<e.length;o++){var a="<tr><td>"+e[o].row+"</td><td>"+e[o].error+"</td></tr>";t(".wpsl-import-details table").append(a)}t(".wpsl-import-details").show()},e.bindEvents()},(SimpleLocatorAdmin=SimpleLocatorAdmin||{}).ListingMap=function(){var e=this,t=jQuery;return e.listings=[],e.markers=[],e.selectors={mapLink:"data-wpsl-listing-map-link",listingLatitude:"data-wpsl-post-latitude",listingLongitude:"data-wpsl-post-longitude",listingId:"data-wpsl-listing-post-id",listingTitle:"data-wpsl-post-title",listingEditLink:"data-wpsl-edit-link",listingViewLink:"data-wpsl-view-link",listingInfoWindow:"data-wpsl-post-infowindow"},e.bindEvents=function(){t(document).ready(function(){"1"===wpsl_locator.show_listing_map&&"1"===wpsl_locator.edit_listing&&(t(".wp-list-table").length<1||(e.addMapElement(),e.setListings()))}),t(document).on("click","["+e.selectors.mapLink+"]",function(o){o.preventDefault(),e.openInfoWindow(t(this))})},e.addMapElement=function(){t('<div class="wpsl-post-listing-map" id="wpsl-post-listing-map"></div>').insertBefore(".wp-list-table")},e.setListings=function(){var o=t(".wp-list-table tbody tr");t.each(o,function(o,a){var l=t(this).find("["+e.selectors.mapLink+"]");t(l).attr(e.selectors.mapLink,o);var s={id:t(l).attr(e.selectors.listingId),title:t(l).attr(e.selectors.listingTitle),editLink:t(l).attr(e.selectors.listingEditLink),viewLink:t(l).attr(e.selectors.listingViewLink),latitude:t(l).attr(e.selectors.listingLatitude),longitude:t(l).attr(e.selectors.listingLongitude)},n=t(l).siblings("["+e.selectors.listingInfoWindow+"]").html();n+="<p>",n+='<a href="'+s.editLink+'" class="button">'+wpsl_locator.edit+"</a>",n+="</p>",s.infowindow=n,e.listings.push(s)}),e.loadMap()},e.loadMap=function(){var o,a=wpsl_locator.mapstyles,l=wpsl_locator.mappin?wpsl_locator.mappin:"",s=new google.maps.LatLngBounds,n=e.listings,i=t("#wpsl-post-listing-map"),r={mapTypeId:"roadmap",mapTypeControl:!1,zoom:8,styles:a,scrollwheel:!1,panControl:!1},c=new google.maps.InfoWindow,d=new google.maps.Map(i[0],r);for(o=0;o<n.length;o++){var p=new google.maps.LatLng(n[o].latitude,n[o].longitude);s.extend(p);var u=new google.maps.Marker({position:p,map:d,title:n[o].title,icon:l});e.markers.push(u),google.maps.event.addListener(u,"click",function(e,t){return function(){c.setContent(n[t].infowindow),c.open(d,e)}}(u,o)),d.fitBounds(s);var m=google.maps.event.addListener(d,"idle",function(){n.length<2&&d.setZoom(13),google.maps.event.removeListener(m)})}var f=google.maps.event.addListener(d,"bounds_changed",function(e){google.maps.event.removeListener(f)})},e.openInfoWindow=function(o){var a=t(o).attr(e.selectors.mapLink);google.maps.event.trigger(e.markers[a],"click")},e.bindEvents()},(SimpleLocatorAdmin=SimpleLocatorAdmin||{}).ExportTemplates=function(){var e=this,t=jQuery;return e.selectors={loadBtn:"data-wpsl-export-template-load",deleteBtn:"data-wpsl-export-template-delete"},e.bindEvents=function(){t(document).on("click","["+e.selectors.loadBtn+"]",function(o){o.preventDefault(),e.loadTemplate(t(this))}),t(document).on("click","["+e.selectors.deleteBtn+"]",function(o){o.preventDefault(),e.deleteTemplate(t(this))})},e.loadTemplate=function(o){var a=t(o).attr(e.selectors.loadBtn);t.ajax({type:"GET",url:ajaxurl,data:{action:"wpslexporttemplates",nonce:wpsl_locator.locatorNonce,templateKey:a},success:function(t){e.populateTemplate(t.templates)}})},e.populateTemplate=function(e){var o=e.standard_columns,a=e.custom_columns,l=e.include_header,s=(e.name,e.column_names),n=e.taxonomies,i=e.taxonomy_separator;t('input[name="standard_columns[]"]').removeAttr("checked");for(var r=0;r<o.length;r++){var c=t('input[name="standard_columns[]"][value="'+o[r]+'"]');t(c).attr("checked",!0)}t('input[name="custom_columns[]"]').removeAttr("checked");for(r=0;r<a.length;r++){c=t('input[name="custom_columns[]"][value="'+a[r]+'"]');t(c).attr("checked",!0)}for(var d in s)t('input[name="column_name['+d+"]").val(s[d]);if(t('input[name="taxonomies[]"').removeAttr("checked"),void 0!==n&&""!==n)for(r=0;r<n.length;r++){c=t('input[name="taxonomies[]"][value="'+n[r]+'"]');t(c).attr("checked",!0)}l?t('input[name="include_header_row"]').attr("checked",!0):t('input[name="include_header_row"]').removeAttr("checked"),t('select[name="taxonomy_separator"]').val(i);var p=e.filename.replace(".csv","");t('input[name="file_name"]').val(p)},e.deleteTemplate=function(o){var a=t(o).attr(e.selectors.deleteBtn);t.ajax({type:"GET",url:ajaxurl,data:{action:"wpslexporttemplatedelete",nonce:wpsl_locator.locatorNonce,templateKey:a},success:function(e){t(o).parent("li").fadeOut("normal",function(){t(this).remove()})}})},e.bindEvents()},(SimpleLocatorAdmin=SimpleLocatorAdmin||{}).QuickEdit=function(){var e=this,t=jQuery;return e.map=!1,e.mapMarker=!1,e.customMarkerPosition={custom:!1},e.fields=[["address","Address"],["address_two","Address Line 2"],["city","City"],["state","State"],["zip","Zip"],["country","Country"],["phone","Phone"]],e.activeItem,e.formData,e.geocoded=!1,e.selectors={quickEditContainer:".simple-locator-quick-edit",editLink:"data-simple-locator-quick-edit",submitButton:"data-simple-locator-quick-edit-submit",cancelButton:"data-simple-locator-quick-edit-cancel",previewButton:"data-simple-locator-quick-edit-preview",error:"data-simple-locator-quick-edit-error",loading:".simple-locator-quick-edit-spinner",map:"data-simple-locator-quick-edit-map"},e.bindEvents=function(){t(document).on("click","["+e.selectors.editLink+"]",function(o){o.preventDefault(),e.clearQuickEdit(),e.activeItem=t(this),e.openForm()}),t(document).on("click","["+e.selectors.cancelButton+"]",function(t){t.preventDefault(),e.clearQuickEdit()}),t(document).on("click","["+e.selectors.submitButton+"]",function(t){t.preventDefault(),e.loading(!0),e.prepareFormData(!1)}),t(document).on("simple-locator-quick-edit-complete",function(t,o,a,l){e.completed(o,a,l)}),t(document).on("keyup",function(o){"Escape"===o.key&&t(e.selectors.quickEditContainer).length>0&&e.clearQuickEdit()}),t(document).on("click","["+e.selectors.previewButton+"]",function(t){t.preventDefault(),e.preview()})},e.openForm=function(){var o='<tr class="simple-locator-quick-edit"><td colspan="'+(t(e.activeItem).parents("tr").find("td").length+t(e.activeItem).parents("tr").find("th").length)+'">';o+="<h3>"+t(e.activeItem).attr("data-title")+"</h3>",o+='<div class="simple-locator-quick-edit-alert" '+e.selectors.error+"></div>",o+='<div class="inner">',o+='<div class="fields">';for(var a=0;a<wpsl_locator.form_fields_order.length;a++){if("map"!=(n=wpsl_locator.form_fields_order[a])&&"latlng"!=n&&"additionalInfo"!=n&&"website"!=n){var l=wpsl_locator.form_fields[n],s=t(e.activeItem).attr("data-"+n);if(o+='<div class="field"><label>'+l.label+"</label>","text"===l.type&&(o+='<input type="text" ',o+=e.attributes(l),o+='value="'+s+'" />'),"select"===l.type){for(var n in o+="<select",o+=e.attributes(l),o+=">",l.choices){var i=l.choices[n];o+='<option value="'+n+'"',n===s&&(o+=" selected"),o+=">"+i+"</option>"}o+="</select>"}o+="</div>"}}o+="</div>\x3c!-- .fields --\x3e",o+='<div class="map" data-simple-locator-quick-edit-map></div>',o+="</div>\x3c!-- .inner --\x3e",o+='<div class="buttons">',o+='<button class="button" '+e.selectors.cancelButton+">"+wpsl_locator.cancel+"</button>",o+='<button class="button button-primary" '+e.selectors.submitButton+">"+wpsl_locator.save+"</button>",o+='<button class="button" '+e.selectors.previewButton+">"+wpsl_locator.preview+"</button>",o+='<div class="simple-locator-quick-edit-spinner"><div class="wpsl-icon-spinner-image"><img src="'+wpsl_locator.loading_spinner+'" class="wpsl-spinner-image" /></div></div>',o+="</div>\x3c!-- .buttons --\x3e",o+="</td></tr>\x3c!-- .dealer-quick-edit --\x3e",t(e.activeItem).parents("tr").hide(),t(o).insertAfter(t(e.activeItem).parents("tr")),e.loadMap(!0)},e.loadMap=function(o){if(o)var a=t(e.activeItem).attr("data-latitude"),l=t(e.activeItem).attr("data-longitude");if(!o)a=e.formData.latitude,l=e.formData.longitude;var s=t("["+e.selectors.map+"]"),n=wpsl_locator.mapstyles,i=wpsl_locator.mappin?wpsl_locator.mappin:"",r=new google.maps.LatLng(a,l);if(e.map)e.marker.setMap(null),e.map.setCenter(r);else{var c={mapTypeId:"roadmap",mapTypeControl:!1,zoom:12,styles:n,scrollwheel:!1,panControl:!1,center:r};e.map=new google.maps.Map(s[0],c)}e.marker=new google.maps.Marker({position:r,map:e.map,icon:i,draggable:!0}),google.maps.event.addListener(e.marker,"drag",function(){e.customMarkerPosition.latitude=e.marker.position.lat(),e.customMarkerPosition.longitude=e.marker.position.lng(),e.customMarkerPosition.custom=!0})},e.prepareFormData=function(o){t("["+e.selectors.error+"]").hide(),e.formData={action:"wpslquickedit",id:t(e.activeItem).attr(e.selectors.editLink)};for(var a=0;a<e.fields.length;a++){var l=e.fields[a][0];e.formData[l]=t("[data-quickedit-"+l+"]").val()}e.geocodeAddress(o)},e.preview=function(){e.initialLoad=!1,e.prepareFormData(!0)},e.geocodeAddress=function(t){for(var o="",a=0;a<e.fields.length;a++){var l=e.fields[a][0];if("address_two"!==l)o+=e.formData[l]+" "}geocoder=new google.maps.Geocoder,geocoder.geocode({address:o},function(o,a){a==google.maps.GeocoderStatus.OK?(e.formData.latitude=o[0].geometry.location.lat(),e.formData.longitude=o[0].geometry.location.lng(),e.geocoded=!0):e.geocoded=!1,t?e.loadMap(!1):e.submitForm()})},e.submitForm=function(){e.customMarkerPosition.custom&&(e.formData.latitude=e.customMarkerPosition.latitude,e.formData.longitude=e.customMarkerPosition.longitude),e.formData.custom_geo=e.customMarkerPosition.custom,t.ajax({type:"GET",url:ajaxurl,data:e.formData,success:function(o){e.loading(!1),"error"!==o.status?t(document).trigger("simple-locator-quick-edit-complete",[e.formData,e.activeItem,e.geocoded]):t("["+e.selectors.error+"]").text(o.message).show()},error:function(e){console.log(e)}})},e.completed=function(o,a,l){for(var s=0;s<e.fields.length;s++){var n="data-"+e.fields[s][0],i=e.formData[e.fields[s][0]];t(a).attr(n,i)}if(l){t(a).attr("data-latitude",e.formData.latitude),t(a).attr("data-longitude",e.formData.longitude);t(a).parents("tr").show();e.clearQuickEdit()}else t("["+e.selectors.error+"]").text(wpsl_locator.quickedit_geocode_error).show()},e.clearQuickEdit=function(){e.map=!1,e.mapMarker=!1,e.customMarkerPosition.custom=!1,t("tr").show(),t(e.selectors.quickEditContainer).remove()},e.attributes=function(e){if(html="",!(e.attributes.length<1)){for(var t=0;t<e.attributes.length;t++){var o=e.attributes[t];"string"!=typeof o?html+=" "+o.attr+'="'+o.value+'"':html+=" "+o}return html}},e.loading=function(o){if(o)return t(e.selectors.loading).show(),void t("["+e.selectors.submitButton+"]").attr("disabled",!0);t("["+e.selectors.submitButton+"]").removeAttr("disabled"),t(e.selectors.loading).hide()},e.bindEvents()},jQuery(document).ready(function(){new SimpleLocatorAdmin.Factory}),(SimpleLocatorAdmin=SimpleLocatorAdmin||{}).endpoints={},SimpleLocatorAdmin.Factory=function(){jQuery;return this.init=function(){new SimpleLocatorAdmin.Modals,new SimpleLocatorAdmin.PostEdit,new SimpleLocatorAdmin.GeneralSettings,new SimpleLocatorAdmin.PostType,new SimpleLocatorAdmin.MapDisplay,new SimpleLocatorAdmin.ResultsDisplay,new SimpleLocatorAdmin.DefaultMap,new SimpleLocatorAdmin.SearchHistory,new SimpleLocatorAdmin.ImportUpload,new SimpleLocatorAdmin.ImportColumnMap,new SimpleLocatorAdmin.Import,new SimpleLocatorAdmin.ListingMap,new SimpleLocatorAdmin.ExportTemplates,new SimpleLocatorAdmin.QuickEdit},this.init()};var editScreenGoogleApiError=!1;function gm_authFailure(e){editScreenGoogleApiError=!0}